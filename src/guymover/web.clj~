(ns guymover.web
  (:require [org.httpkit.server :refer [run-server]]
            [compojure.core :refer [defroutes GET]]
            [compojure.route :refer [resources]]))

(def *current-app*
  (atom nil))

(defroutes app
  (resources "/"))

(defn stop-server
  [server]
  (when server
    (server)))

(defn start-server
  "Start a server and add it to the current app."
  [handler port]
  (stop-server @*current-app*)
  (reset! *current-app*
          (run-server handler {:port port})))


